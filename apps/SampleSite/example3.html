<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta charset="utf-8">
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <title>HPCC Systems - Dynamic Grid Demo</title>
        <script src="js/jquery.js"></script>
        <script src="js/jquery-ui.min.js"></script>
        <script type="text/javascript" src="bower_components/google-code-prettify/bin/prettify.min.js"></script>
        <link href="lib/bootstrap/css/bootstrap.css" rel="stylesheet">
        <link href="css/prettify.css" rel="stylesheet" type="text/css">
        <script src="lib/bootstrap/js/bootstrap.min.js"></script>
        <link href="css/bootstrap_theme.css" rel="stylesheet" type="text/css">
        <link href="//fonts.googleapis.com/css?family=PT+Sans:400,700" rel="stylesheet" type="text/css">

        <link href="css/dynamic_grid.css" rel="stylesheet" type="text/css">
        
        <script src="lib/bootstrap/js/bootstrap.min.js"></script>

        <script src="js/rasterizeHTML.allinone.js"></script>
        <script src="js/svg_to_png.js"></script>
        <script type="text/javascript" src="bower_components/requirejs/require.js"></script>
        <script type="text/javascript" src="../src/config.js"></script>
        <script>var g_targetId = "graph-container";</script>
        
        <script src="js/init_bootstrap_demo_page.js"></script>
        
        <script src="js/dynamic_grid.js"></script>
        <script src="js/theme_defaults.js"></script>
        
        <script src="js/demo_data.js"></script>
        <script>
            var g_test2;
            initialGridObj = [
                {
                    "title": "Population State/County",
                    "src": [
//                        "src/map/ChoroplethCounties",
                        "src/map/ChoroplethStates",
                    ],
                    "columns":[
//                        ["County", "Weight", "Label"],
                        ["State", "Weight", "Label"]
                    ],
                    "data":[
//                        countyPopulationData,
                        statePopulationData
                    ],
                    "placement":{col: 0, row: 0, colSpan: 2, rowSpan: 1},
                    "buttons": [
                        '<button id="close" onClick="closeMe();" class="btn btn-xs btn-default surfaceButton" aria-expanded="true">X</button>',
                        '<button id="minimize" onClick="minimizeMe();" class="btn btn-xs btn-default surfaceButton" aria-expanded="true">_</button>',
                        '<button id="maximize" onClick="maximizeMe();" class="btn btn-xs btn-default surfaceButton" aria-expanded="true">[ ]</button>'
                    ]
                },
                {
                    "title": "County Population Stats",
                    "src": [
                        "src/google/Pie",
                        "src/google/Pie",
                        "src/google/Column"
                    ],
                    "placement":{col: 0, row: 1, colSpan: 1, rowSpan: 1},
                    "childPlacement": [
                        {col: 15, row: 0, colSpan: 15, rowSpan: 15},
                        {col: 15, row: 10, colSpan: 15, rowSpan: 15},
                        {col: 0, row: 0, colSpan: 20, rowSpan: 25},
                    ],
                    "buttons": [
                        '<button id="close" onClick="closeMe();" class="btn btn-xs btn-default surfaceButton" aria-expanded="true">X</button>',
                        '<button id="maximize" onClick="maximizeMe();" class="btn btn-xs btn-default surfaceButton" aria-expanded="true">[ ]</button>'
                    ]
                },
                {
                    "title": "State Population Stats",
                    "src": [
                        "src/google/Pie",
                        "src/google/Pie",
                        "src/google/Column"
                    ],
                    "columns": [
                        ["Subject", "2nd Year"],
                        ["Subject", "2nd Year"],
                        ["ID", "Year 1", "Year 2", "Year 3"]
                    ],
                    "data": [
                        [["Geography", 15],["English", 35],["Math", 78],["Science", 76]],
                        [["Geography", 85],["English", 55],["Math", 18],["Science", 66]],
                        [["Geography", 75, 68, 65],["English", 45, 55, 52],["Math", 98, 92, 90],["Science", 66, 60, 66]]
                    ],
                    "placement":{col: 1, row: 1, colSpan: 1, rowSpan: 1},
                    "childPlacement": [
                        {col: 15, row: 0, colSpan: 15, rowSpan: 15},
                        {col: 15, row: 10, colSpan: 15, rowSpan: 15},
                        {col: 0, row: 0, colSpan: 20, rowSpan: 25}
                    ],
                    "buttons": [
                        '<button id="close" onClick="closeMe();" class="btn btn-xs btn-default surfaceButton" aria-expanded="true">X</button>',
                        '<button id="maximize" onClick="maximizeMe();" class="btn btn-xs btn-default surfaceButton" aria-expanded="true">[ ]</button>'
                    ]
                },
//                {
//                    "title": "County Population Data",
//                    "src": [
//                        "src/other/Table"
//                    ],
//                    "columns":[["County","Population"]],
//                    "data":[countyPopulationData.map(function(n){ return [n[2].slice(0,16),(n[3]+"").replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,")]; })],
//                    "placement":{col: 0, row: 0, colSpan: 1, rowSpan: 2},
//                    "buttons": [
//                        '<button id="close" onClick="closeMe();" class="btn btn-xs btn-default surfaceButton" aria-expanded="true">X</button>',
//                        '<button id="maximize" onClick="maximizeMe();" class="btn btn-xs btn-default surfaceButton" aria-expanded="true">[ ]</button>'
//                    ]
//                },
                {
                    "title": "State Population Data",
                    "src": [
                        "src/other/Table"
                    ],
                    "columns":[["State","Population"]],
                    "data":[statePopulationData.map(function(n){ return [n[2],(n[3]+"").replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,")]; })],
                    "placement":{col: 2, row: 0, colSpan: 1, rowSpan: 2},
                    "buttons": [
                        '<button id="close" onClick="closeMe();" class="btn btn-xs btn-default surfaceButton" aria-expanded="true">X</button>',
                        '<button id="maximize" onClick="maximizeMe();" class="btn btn-xs btn-default surfaceButton" aria-expanded="true">[ ]</button>'
                    ]
                }
            ];
            $(function(){
                $('#graph-container').css({
                    'height':$(window).height() - $('#graph-container').offset().top - 10
                });
                $('#saveLoadWrapper').on('hide.bs.dropdown', function (e) {
                    if($("#saveLoadWrapper :focus").length > 0 || $("#saveLoadWrapper:hover").length > 0){
                        e.preventDefault();
                    }
                });
                $('#saveLoadWrapper').on('show.bs.dropdown', function (e) {
                    fillLoadSavedThemesDropdown();
                });
            });
            function _save_theme(){
                var obj = persistAll(g_mainGrid);
                
//                console.log('Serialized Theme:');
//                for(var i in obj){
//                    console.log(JSON.stringify(obj[i]));
//                }
                var saveName = $('#save-name').val();
                saveLocal(saveName,obj);
                
                fillLoadSavedThemesDropdown(saveName);
            }
            function _load_theme(){
                
            }
            function _delete_theme(){
                
            }
        </script>
    </head>
    <body onresize="doResize();">
        <nav class="navbar navbar-default" role="navigation">
            <!-- Brand and Toggle -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a id="logo" class="navbar-brand" href="#"><img alt="Brand" width="120" height="40" src="hpcc-logo.png"></a>

            </div>
            <!-- Links -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="playground.html">Playground</a></li>
                    <li><a href="themeeditor.html">Theme Editor</a></li>
                    <li><a href="dynamic_grid.html">Dynamic Grid</a></li>
                    <li class="active"><a href="example1.html">Example 1</a></li>
                    <li><a href="example2.html">Example 2</a></li>
                </ul>
                <button class="btn btn-default" style="float:right;margin-top:9px;" onclick="javascript:downloadGridPng($('#graph-container'));"><i class="fa fa-download"></i>Download Grid As PNG</button>
            </div>
        </nav>
        <!-- /.navbar-default -->
        <div id="main">
            <div>
                <div id="controls-pane" style="display:none;">
                    <ul>
                        <li>
                            <fieldset>
                                <legend>JSON</legend>
                                <div id="json-textarea" style="height:300px;overflow-y:scroll;"></div>
                            </fieldset>
                        </li>
                    </ul>
                </div>
                <ul id="tabs-ul" class="nav nav-tabs" role="tablist">
                    <li role="presentation" data-for="colors-pane" class="active"><a href="#colors-pane" aria-controls="colors-pane" role="tab" data-toggle="tab">Colors</a></li>
                    <li role="presentation" data-for="fonts-pane"><a href="#fonts-pane" aria-controls="fonts-pane" role="tab" data-toggle="tab">Fonts</a></li>
                    <li role="presentation" data-for="layout-pane"><a href="#layout-pane" aria-controls="layout-pane" role="tab" data-toggle="tab">Layout</a></li>
                    <li style="float:right;" role="presentation" data-for="layout-pane">
                        <div id="saveLoadWrapper" class="btn-group pull-right default-mode-btn" style="margin-left:6px;">
                            <button type="button" class="btn btn-sm btn-info dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                <i class="fa fa-save"></i>
                                Save/Load Styles
                            </button>
                            <ul class="dropdown-menu save-dropdown" role="menu" style="padding:0;margin-top:0;border-radius:4px">
                                <li style="padding:8px;">
                                    <fieldset>
                                        <legend>Save Current Theme</legend>
                                        <input id="save-name" type="text" placeholder="Theme Name" style="margin-bottom:6px;">
                                        <br>
                                        <button class="btn btn-default" onclick="javascript:_save_theme();">
                                            <i class="fa fa-save"></i>
                                            Save Theme
                                        </button>
                                    </fieldset>
                                </li>
                                <li style="padding:0px 8px;">
                                    <fieldset style="white-space:nowrap;">
                                        <legend>Load Saved Theme</legend>
                                        <select id="load-theme" style="width:100%;height:26px;margin-bottom:6px;">
                                            <option value="Default Theme">Default Theme</option>
                                        </select>
                                        <br>
                                        <button class="btn btn-default" onclick="javascript:_load_theme($('#load-theme'));">
                                            <i class="fa fa-download"></i>
                                            Load Theme
                                        </button>
                                        <button class="btn btn-default" onclick="javascript:_delete_theme($('#load-theme'));">
                                            <i class="fa fa-trash"></i>
                                            Delete Theme
                                        </button>
                                    </fieldset>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="colors-pane">
                        <div class="graph-options">
                        </div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="fonts-pane">
                        <div class="graph-options"></div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="layout-pane">
                        <div class="graph-options"></div>
                    </div>
                </div>
                <div id="graph-container"></div>
            </div>
        </div>
        <div class="modal fade" id="modal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Modal title</h4>
                    </div>
                    <div class="modal-body"></div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
