(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/Widget","../layout/AbsoluteSurface","../common/TextBox"],t):e.api_ITooltip=t(e.d3,e.common_Widget,e.layout_AbsoluteSurface,e.common_TextBox)})(this,function(e,t,n,r){function i(){t.call(this),this._textBox=(new r).shape_colorFill("#FFFFFA").shape_colorStroke("#E6E6E1"),this._tooltip=(new n).units("pixels").widget(this._textBox).visible(!1)}return i.prototype=Object.create(t.prototype),i.prototype.publish("tooltipOffset",5,"number","Offset from the cursor",null,{}),i.prototype.tooltipShow=function(t,n,r){var i=this;if(t!==undefined){this._textBox.columns(r===undefined?n:[n[0],n[r]]).data([r===undefined?t:[t[0],t[r]]]).text(t[0]+", "+n[r]+":  "+t[r]),this._tooltip._target?this._textBox.render():this._tooltip.target(this._parentOverlay.node()).render(function(e){i._textBox._parentElement&&i._textBox._parentElement.style("overflow","hidden")});var s=e.mouse(this._parentOverlay.node()),o=this._textBox.getBBox(!0),u=s[0]-o.width/2;u<0?u=0:u+o.width>this.width()&&(u=this.width()-o.width);var a=s[1]-o.height-this.tooltipOffset();a<0?a=s[1]+this.tooltipOffset():a+o.height>this.height()&&(a=this.height()-o.height-this.tooltipOffset()),this._tooltip.widgetX(u).widgetY(a).widgetWidth(o.width).widgetHeight(o.height)}this._tooltip.visible(t!==undefined).render()},i});